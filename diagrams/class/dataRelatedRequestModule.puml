@startuml
title DataRelatedRequest - PVCUC component view (frontend)

skinparam packageStyle rectangle

package "Views" {
class BrowseDataRelatedRequestsModal {
+render()
+loadDatasets()
+loadRequests(pageNum)
+onGoToDataset()
}

class SubmitDataRelatedRequestModal {
+render()
+loadDatasets()
+handleSubmit(e?)
}
}

package "Presenters" {
class DatasetDetailPresenter {
+render()
+loadDataset(id)
}
}

package "Controllers" {
class DatasetsController {
+submitDataRelatedRequest(datasetId, payload)
+listDataRelatedRequests(datasetId, page, pageSize)
}
}

package "Use-case Layer" {
class "dataset.uc.ts (DataRelatedRequest exports)" as DataRelatedRequestApiFns {
+submitDataRelatedRequest(datasetId, payload): Promise
+listDataRelatedRequests(datasetId, page, pageSize): Promise<DataRelatedRequestDto[]>
}

class DataRelatedRequestPayload {
+subject: string
+description: string
}

class DataRelatedRequestDto {
+id: string
+datasetId: string
+requesterId: string
+requesterUsername: string
+subject: string
+description: string
+status: string
+createdAt: string
+updatedAt: string
}
}

package "DI Container" {
class UCContainer {
+dataRelatedRequest: DataRelatedRequestApiFns
}
}

package "API (frontend client)" {
class FetchAPI {
+fetch(url, init)
}
}

DatasetDetailPresenter --> BrowseDataRelatedRequestsModal : opens
DatasetDetailPresenter --> SubmitDataRelatedRequestModal : opens

BrowseDataRelatedRequestsModal --> DatasetsController : list
SubmitDataRelatedRequestModal --> DatasetsController : submit

DatasetsController --> UCContainer : reads dataRelatedRequest
DatasetsController --> DataRelatedRequestApiFns : delegates
DataRelatedRequestApiFns ..> FetchAPI : fetch()

DataRelatedRequestApiFns ..> DataRelatedRequestPayload
DataRelatedRequestApiFns ..> DataRelatedRequestDto
DataRelatedRequestApiFns --> DatasetDetailPresenter : present(DataRelatedRequestDto[])
@enduml