@startuml
title DataRelatedRequest - component view (frontend)

skinparam packageStyle rectangle

package "Views" {
  class SidebarView {
    +render()
    +openBrowse()
    +openSubmit()
  }

  class BrowseDataRelatedRequestsModal {
    +render()
    +loadDatasets()
    +loadRequests(pageNum)
    +onGoToDataset()
  }

  class SubmitDataRelatedRequestModal {
    +render()
    +loadDatasets()
    +handleSubmit(e?)
  }
}

package "Use-case Layer" {
  class DatasetUseCase {
    +listDatasets(filter?, page, pageSize): Promise<DatasetSummary[]>
  }

  class DatasetSummary {
    +id: string
    +title: string
  }

  class "dataset.uc.ts (DataRelatedRequest exports)" as DataRelatedRequestApiFns {
    +submitDataRelatedRequest(datasetId, payload): Promise<DataRelatedRequestDto>
    +listDataRelatedRequests(datasetId, page, pageSize): Promise<DataRelatedRequestDto[]>
  }

  class DataRelatedRequestPayload {
    +subject: string
    +description: string
  }

  class DataRelatedRequestDto {
    +id: string
    +datasetId: string
    +requesterId: string
    +requesterUsername: string
    +subject: string
    +description: string
    +status: string
    +createdAt: string
    +updatedAt: string
  }
}

package "API (frontend client)" {
  class FetchAPI {
    +fetch(url, init)
  }
}

SidebarView --> BrowseDataRelatedRequestsModal : opens
SidebarView --> SubmitDataRelatedRequestModal : opens

BrowseDataRelatedRequestsModal --> DatasetUseCase : listDatasets()
SubmitDataRelatedRequestModal --> DatasetUseCase : listDatasets()

BrowseDataRelatedRequestsModal --> DataRelatedRequestApiFns : listDataRelatedRequests()
SubmitDataRelatedRequestModal --> DataRelatedRequestApiFns : submitDataRelatedRequest()

DataRelatedRequestApiFns ..> FetchAPI : fetch()
DatasetUseCase ..> FetchAPI : fetch()/client

DataRelatedRequestApiFns ..> DataRelatedRequestPayload
DataRelatedRequestApiFns ..> DataRelatedRequestDto
DatasetUseCase ..> DatasetSummary
@enduml
