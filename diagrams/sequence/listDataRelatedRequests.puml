@startuml
title listDataRelatedRequests use case
autonumber

actor User
participant "Sidebar (Data Related Requests dropdown)" as Sidebar
participant "BrowseDataRelatedRequestsModal" as View
participant "DatasetUseCase" as DatasetUC
participant "dataset.uc.ts\nlistDataRelatedRequests" as ApiFn
participant "FetchAPI" as Fetch
participant "Dataset API\nGET /api/datasets/{datasetId}/requests" as Http

User ->> Sidebar : Selects "Browse"
Sidebar ->> View : opens modal

opt Dataset selection (dropdown/search/manual ID)
	View ->> DatasetUC : listDatasets(filter?, page=0, pageSize=200)
	DatasetUC ->> Fetch : GET /api/datasets?... 
	Fetch ->> Http : GET /api/datasets?... 
	Http --> Fetch : DatasetSummary[]
	Fetch --> DatasetUC : DatasetSummary[]
	DatasetUC --> View : DatasetSummary[]
end

User ->> View : selects dataset
User ->> View : Clicks "Load"
View ->> ApiFn : listDataRelatedRequests(datasetId, page, pageSize)
ApiFn ->> Fetch : GET /api/datasets/{datasetId}/requests?page=&pageSize=
Fetch ->> Http : GET /api/datasets/{datasetId}/requests?page=&pageSize=
Http --> Fetch : DataRelatedRequestDto[]
Fetch --> ApiFn : DataRelatedRequestDto[]
ApiFn --> View : DataRelatedRequestDto[]
View -->> User : Renders requests list
@enduml