@startuml
title SetDataSchemaForDataset Use Case
autonumber

actor "Metadata Manager" as User

participant "DatasetTableView" as TableView
participant "DatasetTablePresenter" as TablePresenter
participant "SelectDataSchemaModalPresenter" as ModalPresenter
participant "SelectDataSchemaModalView" as ModalView
participant "datasets.controller.ts" as Controller
participant "uc.dataset" as UseCase
participant "CombinedClient" as Client
participant "Dataset API" as API

== Open Schema Selection Modal ==
User -> TableView : Click "Set Schema" in dropdown menu
TableView -> Controller : onSetSchema(dataset)
Controller -> UseCase : uc.dataset.listDataSchemas()
UseCase -> Client : listDataSchemas()
Client -> API : GET /data-schemas
API --> Client : 200 OK + DataSchema[]
Client --> UseCase : DataSchema[]
UseCase --> ModalPresenter : DataSchema[]
ModalPresenter -> ModalView : render(schemas)
ModalView --> User : Display available schemas

== Select and Assign Schema ==
User -> ModalView : Select schema from list + Click "Assign Schema"

ModalView -> Controller : onSelectSchema(schemaId)
Controller -> UseCase : setDataSchemaForDataset(datasetId,schemaId)
UseCase -> Client : setDataSchemaForDataset(datasetId, schemaId)
Client -> API : PUT /datasets/{datasetId}/schema
API --> Client : 200 OK + {id}
Client --> UseCase : {id}
UseCase --> ModalPresenter : {id}
ModalPresenter -> ModalView : Close()
ModalView --> User : Close modal


@enduml