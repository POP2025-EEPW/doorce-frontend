@startuml
title SetDataSchemaForDataset Use Case
autonumber

actor "Metadata Manager" as User

participant "DatasetListView" as View
participant "SelectDataSchemaModalView" as ModalView
participant "SetDatasetSchemaPresenter" as Presenter
participant "setDataSchema.controller.ts" as Controller
participant "uc.schema" as UseCase
participant "CombinedClient" as Client
participant "API" as Http

== Open Schema Selection Modal ==
User -> View : Click "Set Schema"
View -> Controller : openSetSchemaModal(dataset)
Controller -> UseCase : listSchemas()
UseCase -> Client : listSchemas()
Client -> Http : GET /data-schemas
Http --> Client : DataSchema[]
Client --> UseCase : DataSchema[]
UseCase -> Presenter : presentSchemas(schemas)
Presenter -> ModalView : updateState(schemas, open=true)
ModalView --> User : Show modal with schema list

== Assign Schema ==
User -> ModalView : Select schema + Click "Confirm"
ModalView -> Controller : onConfirm(schemaId)
Controller -> UseCase : setDatasetSchema(datasetId, schemaId)
UseCase -> Client : setDatasetSchema(...)
Client -> Http : PUT /datasets/{id}/schema
Http --> Client : 200 OK
Client --> UseCase : void
UseCase -> Presenter : presentSetSchemaSuccess()
Presenter -> View : handle success (close modal, show toast)
View --> User : Show success message

@enduml